深入解析Windows操作系统 （Microsoft Windows Internals）

官方网站：
http://www.sysinternals.com、 http://www.microsoft.com/technet/sysinternals/information.windowsinternals.mspx （已失效）、
http://www.microsoft.com/learning/support （已失效）、http://www.microsoft.com/learning/support/search.asp （已失效）、
http://www.microsoft.com/technet/sysinternals （已失效） 
 
第4版
☆
作者：Mark E.Russinovich、David A.Solomon
联系作者：
windowsinternals@sysinternals.com

知识点 
1.	Windows操作系统基础知识。

Windows NT的历史全景
序言
致谢
引言
	本书的结构
	本书的历史
	第4版的变化
	练习实验
	本书没有涵盖的话题
	提醒和告诫
	支持
	来自作者的支持
	来自出版商Microsoft Press的支持
第1章 概念和工具 
	1.1 Windows操作系统的版本 
	1.2 基础概念和术语 
		WindowsAPI
		服务、函数和例程 
		进程、线程和作业 
		虚拟内存 
		内核模式和用户模式 
		终端服务及多个会话 
		对象和句柄 
		安全性 
		注册表 
		Unicode 
	1.3	挖掘Windows内部机理 
		性能工具 
		Windows支持工具箱 
		Windows资源工具箱 
		内核调试 
		PlatformSDK 
		DDK（设备驱动程序开发工具） 
		Sysinternals工具 
	1.4 本章总结 
第2章 系统结构 
	2.1 需求和设计目标 
	2.2 操作系统模型 
	2.3 总体结构 
		可移植性  
		对称多处理 
		可伸缩性 
		客户和服务器版本之间的差异 
		检查版本 
	2.4 关键的系统组件 
		环境子系统和子系统DLL 
		硬件抽象层（HAL） 
		设备驱动程序 
		系统进程 
	2.5 本章总结 
第3章 系统机制 
	3.1 陷阱分发 
		中断分发 
		异常分发 
		系统服务分发 
	3.2 对象管理器 
		执行体对象 
		对象结构 
	3.3 同步 
		高IRQL的同步 
		低IRQL的同步 
	3.4 系统辅助线程 
	3.5 Windows全局标志 
	3.6 本地过程调用（LPC） 
	3.7 内核事件追踪 
	3.8 Wow64 
		Wow64进程地址空间布局结构 
		系统调用 
		异常分发 
		用户回调 
		文件系统重定向 
		注册表的重定向和反射 
		I/O控制请求 
		16位安装器应用程序 
		打印 
		一些限制 
	3.9 本章总结 
第4章 管理机制 
	4.1 注册表 
		查看和修改注册表 
		注册表用法 
		注册表数据类型 
		注册表逻辑结构 
		注册表问题的诊断 
		注册表的内部机理 
	4.2 服务 
		服务应用 
		服务账户 
		服务控制管理器 
		服务启动 
		启动错误 
		接受当前引导和“最后已知的好控制集” 
		服务失败 
		服务停机 
		共享的服务进程 
		服务控制程序 
	4.3 Windows管理规范 
		WMI体系结构 
		提供者 
		公共信息模型（CIM）和可管理对象的格式语言 
		WMI名字空间 
		类关联 
		WMI实现 
		WMI安全性 
	4.4 本章总结 
第5章 启动和停机 
	5.1 引导过程 
		x86和x64引导准备 
		x86/x64引导扇区和Ntldr 
		IA64引导过程 
		初始化内核和执行体子系统 
		Smss、Csrss和Winlogon 
		自动启动的映像文件 
	5.2 引导和启动问题的故障检查 
		最后已知的好配置 
		安全模式 
		安全模式下的驱动程序加载 
		恢复控制台（RecoveryConsole） 
		解决常见的引导问题 
	5.3 停机 
	5.4 本章总结 
第6章 进程、线程和作业 
	6.1	进程的内部机理 
		数据结构 
		内核变量 
		性能计数器 
		有关的函数 
	6.2 CreateProcess的流程 
		阶段1：打开将要被执行的映像 
		阶段2：创建Windows执行体进程对象 
		阶段3：创建初始线程，以及它的栈和执行环境 
		阶段4：将新进程通知Windows子系统 
		阶段5：启动初始线程的执行 
		阶段6：在新进程环境下执行进程初始化 
	6.3 线程的内部机理 
		数据结构 
		内核变量 
		性能计数器 
		有关的函数 
		一个线程的产生 
	6.4 检查线程活动 
	6.5 线程调度 
		Windows调度的概述 
		优先级别 
		Windows调度API 
		有关的工具 
		实时优先级 
		线程状态 
		分发器数据库 
		时限 
		调度情形 
		环境切换 
		空闲（Idle）线程 
		优先级提升 
		多处理器系统 
		多处理器的线程调度算法 
	6.6 作业对象 
	6.7 本章总结 
第7章 内存管理 
	7.1 内存管理器简介 
		内存管理器组件 
		内部同步 
		配置内存管理器 
		检查内存的使用情况 
	7.2 内存管理器提供的服务 
		大页面和小页面 
		保留的和提交的页面 
		锁住内存 
		分配粒度 
		共享内存和映射文件 
		保护内存 
		“不可执行”页面保护 
		写时复制 
		堆管理器 
		地址窗口扩展 
	7.3 系统内存池 
		配置内存池的大小 
		监视内存池的使用 
		预读列表（Look-AsideList） 
		驱动程序检验器（DriverVerifier） 
	7.4 虚拟地址空间的布局结构 
		x86用户地址空间的布局结构 
		x86系统地址空间的布局结构 
		x86会话空间 
		系统页表项（PTE，PageTableEntry） 
		64位地址空间布局结构 
	7.5 地址转译 
		x86虚拟地址转译 
		地址转译快查缓冲区 
		物理地址扩展（PAE） 
		IA-64虚拟地址转译 
		x64虚拟地址转译 
	7.6 页面错误处理 
		无效PTE 
		原型PTE 
		页面换入I/O 
		冲突的页面错误 
		页面文件 
	7.7 虚拟地址描述符 
	7.8 内存区对象 
	7.9 工作集 
		按需换页 
	7.10 逻辑预取器 
		放置策略 
		工作集管理 
		平衡集管理器和交换器 
		系统工作集 
	7.11 页面帧编号数据库 
		页面列表的动态变化 
		已修改页面写出器 
		PFN数据结构 
		低内存通知和高内存通知 
	7.12 本章总结 
第8章 安全性 
	8.1 安全系统组件 
	8.2 保护对象 
		访问检查 
		安全描述符和访问控制 
	8.3 账户权限和特权 
		账户权限 
		特权
		超级特权 
	8.4 安全审计 
	8.5 登录（Logon） 
		Winlogon初始化 
		用户登录步骤 
	8.6 软件限制策略 
	8.7 本章总结 
第9章 I/O系统 
	9.1 I/O系统组件 
		I/O管理器 
		典型的I/O处理过程 
	9.2 设备驱动程序 
		设备驱动程序的类型 
		驱动程序的结构 
		驱动程序对象和设备对象 
		打开设备 
	9.3 I/O处理 
		I/O类型 
		映射文件I/O和文件缓存 
		I/O请求包 
		针对单层驱动程序的I/O请求 
		针对分层的驱动程序的I/O请求 
		I/O完成端口 
		驱动程序检验器（DriverVerifier） 
	9.4 即插即用（PnP）管理器 
		即插即用支持的级别 
		驱动程序对于即插即用的支持 
		驱动程序加载、初始化和安装 
		驱动程序安装 
	9.5 电源管理器 
		电源管理器的操作 
		驱动程序的电源操作 
		驱动程序对于设备电源的控制 
	9.6 本章总结 
第10章 存储管理 
	10.1 有关存储的术语 
	10.2 磁盘驱动程序 
		Ntldr 
		磁盘类、端口和小端口驱动程序 
		磁盘设备对象 
		分区管理器 
	10.3 卷的管理 
		基本磁盘 
		动态磁盘 
		多分区卷的管理 
		卷名字空间 
		卷的I/O操作 
		虚拟磁盘服务 
		卷影像（shadow）拷贝服务 
	10.4 本章总结 
第11章 缓存管理器 
	11.1 缓存管理器的关键特性 
		单个中心化的系统缓存
		内存管理器
		缓存一致性
		虚拟块缓存
		流式缓存机制
		对可恢复文件系统的支持
	11.2 缓存的虚拟内存管理
	11.3 缓存的大小
		LargeSystemCache
		缓存的虚拟大小
		缓存的工作集大小
		缓存的物理大小
	11.4 缓存的数据结构
		系统范围的缓存数据结构
		针对每个文件的缓存数据结构
	11.5 文件系统接口
		从缓存中来回拷贝数据
		通过映射和锁定接口进行缓存
		通过直接内存访问接口进行缓存
	11.6 快速I/O
	11.7 预读（ReadAhead）和滞后写（WriteBehind）
		智能预读
		回写缓存（Write-BackCaching）和延迟写（LazyWriting）
		写节流（WriteThrottling）
		系统线程
	11.8 本章总结
第12章 文件系统 
	12.1 Windows文件系统格式
		CDFS
		UDF
		FAT12、FAT16和FAT32
		NTFS
	12.2 文件系统驱动程序总体结构
		本地FSD
		远程FSD
		文件系统操作
		文件系统过滤型驱动程序
	12.3 诊断文件系统的问题
		Filemon的基本和高级模式
		Filemon诊断技巧
	12.4 NTFS设计目标和特性
		高端（High-End）文件系统的需求
		NTFS的高级特性
	12.5 NTFS文件系统驱动程序
	12.6 NTFS在磁盘上的结构
		卷（volume）
		簇（cluster）
		主文件表（MFT）
		文件引用号
		文件纪录
		文件名
		驻留的和非驻留的属性
		数据压缩和稀疏文件
		变化日志文件
		索引
		对象ID
		配额跟踪
		统一的安全性
		重解析点
	12.7 NTFS的恢复支持
		文件系统设计的演变
		日志记录
		恢复
		NTFS的坏簇恢复
	12.8 加密文件系统（EFS）安全性
		第一次加密一个文件
		解密过程
		加密文件的备份
	12.9 本章总结
第13章 网络 
	13.1 Windows的网络总体结构
		OSI参考模型
		Windows网络组件
	13.2 网络API
		Windows套接字（WindowsSockets）
		远过程调用
		Web访问API
		命名管道和邮件槽
		NetBIOS
		NetBIOS的操作
		其他的网络API
	13.3 多重定向器支持
		多提供者转发器
		多UNC提供者
	13.4 名称解析
		域名系统
		WindowsInternet名称服务
	13.5 协议驱动程序
		TCP/IP的扩展
	13.6 NDIS驱动程序
		NDIS小端口的变化形式
		面向连接的NDIS
		外接NDIS（RemoteNDIS）
		QOS
	13.7 绑定
	13.8 分层的网络服务
		远程访问（RemoteAccess）
		活动目录
		网络负载平衡
		文件复制服务
		分布式文件系统
	13.9 本章总结
第14章 崩溃转储分析 
	14.1 Windows为什么会崩溃
	14.2 蓝屏
	14.3 崩溃转储文件
		崩溃转储的生成
	14.4 Windows错误报告
	14.5 在线崩溃分析
	14.6 基本的崩溃转储分析
		Notmyfault
		基本的崩溃转储分析
		详细的分析
	14.7 使用崩溃诊断工具
		缓冲区溢出和特殊内存池
		代码改写和系统代码写保护
	14.8 高级的崩溃转储分析
		栈破坏
		挂起的系统或无响应的系统
		当没有崩溃转储时

第6版上册
★
作者：Mark E.Russinovich、David A.Solomon、Alex Ionescu

知识点 
1.	Windows操作系统基础知识。  
 
引言
	本书的结构
	本书的历史
	第6版的变化
	练习实验
	本书没有涵盖的话题
	提醒和告诫
	致谢 
	勘误和本书支持
	倾听你的声音
	保持联系
第1章 概念和工具 
	1.1 Windows操作系统的版本 
	1.2 基础概念和术语 
		WindowsAPI
		服务、函数和例程 
		进程、线程和作业 
		虚拟内存 
		内核模式和用户模式 
		终端服务及多个会话 
		对象和句柄 
		安全性 
		注册表 
		Unicode 
	1.3	挖掘Windows内部机理 
		性能监视器  
		内核调试 
		Windows软件开发工具		
		Windows驱动程序开发工具
		Sysinternals工具 
	1.4 本章总结 
第2章 系统结构
	2.1 需求和设计目标 
	2.2 操作系统模型 
	2.3 总体结构 
		可移植性  
		对称多处理 
		可伸缩性 
		客户机和服务器版本之间的差异 
		检查版本 
	2.4 关键的系统组件 
		环境子系统和子系统DLL 
		Ntdll.dll
		执行体
		内核
		硬件抽象层（HAL） 
		设备驱动程序 
		系统进程 
	2.5 本章总结 
第3章 系统机制 
	3.1 陷阱分发 
		中断分发 
		定时器处理
		异常分发 
		系统服务分发 
	3.2 对象管理器 
		执行体对象 
		对象结构 
	3.3 同步 
		高IRQL的同步 
		低IRQL的同步 
	3.4 系统辅助线程 
	3.5 Windows全局标志 
	3.6 高级本地过程调用（ALPC） 
		连接模型
		消息模型
		异步操作
		视图、区域和内存区
		属性
		Blob、句柄和资源
		安全性
		性能
		调试和跟踪
	3.7 内核事件追踪 
	3.8 Wow64 
		Wow64进程地址空间布局结构 
		系统调用 
		异常分发 
		用户APC分发
		控制台支持
		用户回调 
		文件系统重定向 
		注册表的重定向
		I/O控制请求 
		16位安装器应用程序 
		打印 
		一些限制
	3.9 用户模式调试
		内核支持
		原生支持
		Windows子系统支持
	3.10 映像加载器
		进程初始化早期工作
		DLL名称解析
		DLL名称重定向
		已加载模块数据库
		导入信息解析
		导入过程初始化的后期处理
		SwitchBack
		API集
	3.11 超级监督者（Hyper-V）
		分区
		父分区
		子分区 
		硬件仿真和支持
	3.12 内核事务管理器
	3.13 热补丁支持
	3.14 内核补丁保护
	3.15 代码完整性
	3.16 本章总结 
第4章 管理机制
	4.1 注册表 
		查看和修改注册表 
		注册表用法 
		注册表数据类型 
		注册表逻辑结构 
		事务型注册表
		监视注册表活动
		注册表的内部机理 
	4.2 服务 
		服务应用 
		服务账户 
		服务控制管理器 
		服务启动 
		启动错误 
		接受当前引导和“最后已知的好控制集” 
		服务失败 
		服务停机 
		共享的服务进程 
		服务标记
	4.3 统一的后台进程管理器
		初始化
		UBPM API
		提供者注册 
		消费者注册 
		TaskHost
		服务控制程序
	4.4 Windows管理设施 
		提供者 
		公共信息模型（CIM）和可管理对象的格式语言 	 
		类关联 
		WMI实现 
		WMI安全性 
	4.5 Windows诊断基础设施
		WDI设施
		诊断策略服务
		诊断功能
	4.6 本章总结 
第5章 进程、线程和作业	
	5.1	进程的内部机理 
		数据结构 
	5.2 受保护进程 
	5.3 CreateProcess的流程 
		阶段1：转换并验证参数和标志
		阶段2：打开将要被执行的映像 
		阶段3：创建Windows执行体进程对象 
		阶段4：创建初始线程，以及它的栈和执行环境 
		阶段5：执行特定于Windows子系统的初始化后处理 
		阶段6：启动初始线程的执行 
		阶段7：在新进程环境下执行进程初始化 
	5.4 线程的内部机理 
		数据结构  
		一个线程的诞生 
	5.5 检查线程活动 
		受保护进程的线程上的访问限制
	5.6 工作者工厂（线程池）
	5.7 线程调度 
		Windows调度的概述 
		优先级别  
		线程状态 
		分发器数据库 
		时限 
		优先级提升 
		环境切换 
		调度情形 		
		空闲（Idle）线程 
		线程选择
		多处理器系统 
		多处理器的线程调度算法 
		处理器的选择
	5.8 基于处理器份额的调度
		分布式公平份额调度
		CPU比率的限制
	5.9 动态的处理器添加与更换
	5.10 作业对象
		作业的限制
		作业集
	5.11 本章总结 
第6章 安全性
	6.1 安全等级
	6.2 安全系统组件 
	6.3 保护对象 
		访问检查 
		安全标识符
		虚拟服务帐户
		安全描述符和访问控制
	6.4 AuthZ API
	6.5 账户权限和特权 
		账户权限 
		特权
		超级特权 
	6.6 进程和线程的访问令牌
	6.7 安全审计 
		对象访问的审计
		全局审计策略
		高级审计策略设置
	6.8 登录（Logon） 
		Winlogon初始化 
		用户登录步骤 
		可保证的认证
		用户认证的生物识别框架
	6.9 用户帐户控制和虚拟化
		文件系统和注册表虚拟化
		权限提升
	6.10 应用程序标识 
	6.11 AppLocker
	6.12 软件限制策略 
	6.13 本章总结 
第7章 网络  
	7.1 Windows的网络总体结构
		OSI参考模型
		Windows网络组件
	7.2 网络API
		Windows套接字（WindowsSockets）
		Winsock内核
		远过程调用
		Web访问API
		命名管道和邮件槽
		NetBIOS
		其他的网络API
	7.3 多重定向器支持
		多提供者转发器
		多UNC提供者
		代理提供者
		重定向器
		小重定向器
		服务器消息块与子重定向器
	7.4 分布式文件系统名字空间
	7.5 分布式文件系统复制
	7.6 脱机文件
		缓存模式
		幻影
		数据安全性
		缓存的结构
	7.7 BranchCache
		缓存模式
		BranchCache优化下的应用程序数据获取：SMB序列
		BranchCache优化下的应用程序数据获取：HTTP序列
	7.8 名称解析
		域名系统
		对等体名称解析协议
	7.9 位置和拓扑结构
		网络位置感知
		网络连接状态指示器
		链路层拓扑发现
	7.10 协议驱动程序
		Windows过滤平台
	7.11 NDIS驱动程序
		NDIS小端口的变化形式
		面向连接的NDIS
		外接NDIS（RemoteNDIS）
		QOS
	7.12 绑定
	7.13 分层的网络服务
		远程访问（RemoteAccess）
		活动目录
		网络负载平衡
		直接访问
	7.14 本章总结

